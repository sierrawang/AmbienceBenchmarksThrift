all: load_balancer tweet_db user_db worker write_endpoint read_endpoint test_load_balancer

load_balancer: load_balancer.cpp
	g++ ../gen-cpp/worker.cpp ../gen-cpp/load_balancer_types.cpp load_balancer.cpp -o load_balancer -lthrift -DTIMESTAMP_LOGGING

tweet_db: tweet_db.cpp
	g++ ../gen-cpp/tweet_db.cpp ../gen-cpp/load_balancer_types.cpp tweet_db.cpp -o tweet_db -lthrift

user_db: user_db.cpp
	g++ ../gen-cpp/tweet_db.cpp ../gen-cpp/user_db.cpp ../gen-cpp/load_balancer_types.cpp user_db.cpp -o user_db -lthrift

worker: worker.cpp
	g++ ../gen-cpp/tweet_db.cpp ../gen-cpp/user_db.cpp ../gen-cpp/read_endpoint.cpp ../gen-cpp/worker.cpp ../gen-cpp/load_balancer_types.cpp worker.cpp -o worker -lthrift

write_endpoint: write_endpoint.cpp
	g++ ../gen-cpp/write_endpoint.cpp ../gen-cpp/worker.cpp ../gen-cpp/load_balancer_types.cpp write_endpoint.cpp -o write_endpoint -lthrift

read_endpoint: read_endpoint.cpp
	g++ ../gen-cpp/read_endpoint.cpp ../gen-cpp/load_balancer_types.cpp read_endpoint.cpp -o read_endpoint -lthrift

test_load_balancer: test_load_balancer.cpp
	g++ ../gen-cpp/write_endpoint.cpp ../gen-cpp/load_balancer_types.cpp ../gen-cpp/read_endpoint.cpp test_load_balancer.cpp -o test_load_balancer -lthrift

clean:
	rm test_load_balancer load_balancer tweet_db user_db worker write_endpoint read_endpoint worker_0.txt worker_1.txt worker_2.txt worker_3.txt worker_4.txt load_balancer.txt read_endpoint.txt write_endpoint.txt tweet_db.txt user_db.txt test_load_balancer.txt
